document.addEventListener(`DOMContentLoaded`,(()=>{let _=`SAT`,Q=0,V=`white`,L=`1`,a0=`0`,a5=100000000,X=3,O=`USD`,$=``,P=1,Y=null,N=`=`,W=0.06,U=2,R=`px`,Z=2.4,a1=4,M=`BTC`,a2=Date.now,T=Math,a6=Math.abs,S=Math.floor,a4=isNaN,a3=parseFloat;var K=(a=>{if(e!==-P){z(e,a.key);q()}});var C=(()=>{const a=a2();if(a- g>500){f=!f;g=a;q()};if(e!==-P)requestAnimationFrame(C)});var x=((a,c,d,e)=>{const f=a+ e/U+ U;b.strokeStyle=`#CC0000`;b.lineWidth=m*W;b.beginPath();b.moveTo(f,c- d/Z);b.lineTo(f,c+ d/Z);b.stroke();b.strokeStyle=V});var A=(b=>{const d=a.getBoundingClientRect();const e=a.width/d.width;const f=a.height/d.height;return {x:(b.clientX- d.left)*e/c,y:(b.clientY- d.top)*f/c}});var y=(()=>{const a=d.map(a=>b.measureText(a).width);return a.reduce((a,b)=>a+ b,Q)+ n*(d.length- P)});var t=(()=>{b.font=`${m*3.5}px Unna`;b.fillStyle=V;b.strokeStyle=V;b.lineWidth=m*W;b.textAlign=`center`;b.textBaseline=`middle`});var z=((a,b)=>{if(a===P&&b===Y){d[P]=d[P]===M?_:M;e=-P;f=!1;let a=d[j===Q?Q:X];if(a!==$){E(j===Q?M:O,a)}else{d[Q]=a0;d[X]=a0}}else if(a===-P||a===a1){e=-P;f=!1}else if(a===Q||a===X){j=a;e=a;f=!0;g=a2();C()}else{e=-P;f=!1};if(e!==-P&&b!==Y){if(b===`Backspace`){d[e]=d[e].slice(Q,-P)}else if(b.length===P){d[e]+=b};if(e===Q){E(M,d[e])}else if(e===X){E(O,d[e])}}});var D=(async()=>{const a=`https://api.coinbase.com/v2/exchange-rates?currency=BTC`;try{const b=await fetch(a);const c=await b.json();h=a3(c.data.rates.USD);let e=d[j];if(e===$){if(j===Q){d[X]=a0}else if(j===X){d[Q]=a0}}else{let a=a3(e);if(!a4(a)){if(j===Q){E(M,d[Q])}else if(j===X){E(O,d[X])}}else{if(j===Q){d[X]=k.USD}else if(j===X){d[Q]=k.BTC}}};q()}catch(a){console.error(`Error fetching BTC to USD rate:`,a);q()}I()});var u=(()=>{l=[];const e=a.height/(U*c);const f=y();const g=v();let h=(a.width/c- f)/U;d.forEach((a,c)=>{const d=b.measureText(a).width;h+=d/U;if(c===Q||c===X){b.fillStyle=c===j?`#CCFFCC`:V};if(c===Q||c===X){b.globalAlpha=c===j?P:i};b.fillText(a,h,e+ m*0.13);b.fillStyle=V;b.globalAlpha=P;if(a!==N){const a=h- d/U- n/U;const b=e- g/U- n/U;const f=d+ n;const i=g+ n;w(d,h,e,g,n,c);l.push({rectX:a,rectY:b,rectWidth:f,rectHeight:i})}else l.push(Y);h+=d/U+ n})});var J=(a=>{const {x:b,y:c}=A(a);const d=B(b,c);z(d,Y);q()});var o=(()=>{p();window.addEventListener(`resize`,p);a.addEventListener(`click`,J);document.addEventListener(`keydown`,K);D();setInterval(D,5000)});var F=(a=>{if(a===Q)return a0;if(a6(a)<0.01)return a.toFixed(8);else return a.toString()});var I=(()=>{var a=(()=>{if(i<P){i+=0.015;q();requestAnimationFrame(a)}});i=0.35;a()});var G=(a=>{if(a===Q)return a0;if(a6(a)>Q&&a6(a)<P){return a.toFixed(a1)};if(a6(a)>P&&a6(a)<1000)return a.toFixed(U);return a.toString()});var E=((a,b)=>{if(h===Q)return;let c=a3(b);if(a===M){d[Q]=b;if(b===$){d[X]=a0}else if(!a4(c)){let a=d[P]===_?a5:P;let b=c*h/a;b=H(b,a1);d[X]=G(b);k.USD=d[X]}else{d[X]=k.USD}}else if(a===O){d[X]=b;if(b===$){d[Q]=a0}else if(!a4(c)){let a=d[P]===_?a5:P;let b=c/h*a;if(d[P]===_){b=S(b)}else{b=H(b,a1)};d[Q]=F(b);k.BTC=d[Q]}else{d[Q]=k.BTC}};document.title=d[X]+ ` USD - satsval`});var w=((a,c,d,g,h,i)=>{const j=c- a/U- h/U;const k=d- g/U- h/U;b.strokeRect(j,k,a+ h,g+ h);if(e===i&&f){x(c,d,g+ h,a)}});var q=(()=>{s();t();u();r()});var p=(()=>{a.style.width=window.innerWidth+ R;a.style.height=window.innerHeight+ R;a.width=S(window.innerWidth*c);a.height=S(window.innerHeight*c);b.scale(c,c);m=T.min(window.innerWidth,window.innerHeight)/50;n=m/0.6;b.font=`${m}px Unna`;q()});var r=(()=>{const a=m*U;b.font=`${a}px Unna`;b.fillStyle=V;b.textAlign=`left`;const c=m;const d=a;b.fillText(`satsval`,c,d)});var v=(()=>d.reduce((a,c)=>{const d=b.measureText(c);const e=d.actualBoundingBoxAscent+ d.actualBoundingBoxDescent;return T.max(a,e)},Q));var s=(()=>{b.clearRect(Q,Q,a.width,a.height)});var B=((a,b)=>l.findIndex((c,e)=>{if(c&&d[e]!==N){const {rectX:d,rectY:e,rectWidth:f,rectHeight:g}=c;return a>=d&&a<=d+ f&&b>=e&&b<=e+ g};return !1}));var H=((a,b)=>{if(a===Q){return Q};const c=T.ceil(T.log10(a6(a)));const d=b- c;const e=T.pow(10,d);const f=T.round(a*e);const g=f/e;const h=d>Q?d:Q;const i=g.toFixed(h);return a3(i)});const a=document.getElementById(`canvas`);const b=a.getContext(`2d`);const c=window.devicePixelRatio;let d=[L,M,N,`......`,O];let e=-P;let f=!0;let g=Q;let h=Q;let i=P;let j=Q;let k={BTC:L,USD:L};let l=[];let m;let n;o()}))